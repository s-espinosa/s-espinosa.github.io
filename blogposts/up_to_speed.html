<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Up to Speed With React</title>
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>
    <header>
      <div class='container'>
        <h1>Up to Speed With React</h1>
      </div>
    </header>
    <main>
      <h2>Background</h2>
      <p>In Module 4, we were asked to take a project that previous cohorts had Coming to a React app with existing code. For a quick run-down on the project, take a look at the background in <a href="./commits.html">this</a> related post. Here I want to talk a little bit about how I went about getting to know the project given that I was coming to it with extremely limited experience with React, and what I learned along the way. While this is going to be specific to this React project, I think the general approach will likely be similar no matter the language/framework for anyone with some experience trying to get to know a technology that's new to them.</p>
      <h2>Files and What they Tell You</h2>
      <p>Our project had the following structure</p>
      <code>
      css/
        custom.css
      lib/
        helpers.js
        index.js
        components/
          Header.js
          Job.js
          JobIndex.js
          JobListings.js
          JobShow.js
          SearchBarAndListings.js
          Technology.js
          TechnologyItem.js
      public/
        index.html
        main.bundle.js
        main.bundle.js.map
      test/
        JobShow-texst.js
        header-test.js
        jobIndex-test.js
        jobListings-test.js
        search-test.js
        setup.js
      .babelrc
      .gitignore
      .jshintrc
      Procfile
      README.md
      app-screen-shot.png
      package.json
      server.js
      webpack.config.js
      webpack.production.config.js
      </code>
      <p>At first it seems like there's a lot to unpack here, but let's narrow some things down.</p>
      <ul>
        <li><strong>README.md: </strong>Probably the best place to start, and there's lots of good information here. Unfortunately, as is pretty typical it seems that this is primarily information about how to set up the app and what the app does. It assumes a certain understanding of the technologies being used, and doesn't give a ton of insight into what's really happening in the background. If we're planning on really digging in and getting our hands dirty this doesn't give us a ton of information.</li>
        <li><strong>css: </strong>Looks like a pretty standard css file. Not much to see here.</li>
        <li><strong>test: </strong>We know everything in the test file is going to be related to testing. That setup file looks like it's going... to be... related to setting up the test suite? I'm guessing so. Let's ignore this for now.</li>
        <li><strong>.babelrc, .gitignore, .jshintrc: </strong> Transpiler, version control ignore file, and linter. Guessing these are skinny files. Will be good to take a peek later to see if there are any surprises, but these don't feel like they're the heart of our project.</li>
        <li><strong>Procfile: </strong>Another skinny file. Not much here.</li>
        <li><strong>app-screen-shot: </strong>Looks like this is most likely a support file for the README.</li>
        <li><strong>webpack.config.js, webpack.production.config.js: </strong>I'm getting a similar feel from these files. Webpack is important to be sure, but if I'm looking to get up to speed quickly on the code base I'm likely going to save these for a little bit.</li>
      </ul>
      <p>That leaves us with the lib and public folders, and the package.json, and server.js files.</p>

      <h2>Key Files</h2>
      <p>At this point, package.json and server.js both seemed like pretty likely candidates given that they were sitting at the root. Since this is a web application, let's take a look at the <strong>server.js</strong> file. In there we'll find the following:</p>

      <code>
      app.get('/', function(request, response) {
        response.sendFile(__dirname + '/public/index.html');
      });
      </code>

      <p>So a get request to root sends us to <strong>index.html</strong> in the public folder. Let's take a quick look there to see if there's anything interesting.</p>

      <code>
      &#60body&#62
        &#60div id="application"&#62&#60/div&#62
        &#60script src="/main.bundle.js"&#62&#60/script&#62
      &#60/body&#62
      </code>

      <p>So very little in the body tags, just a div with an id of 'application' and a script tag. I know from previous experience that the main.bundle.js is just a compiled version of scripts defined in lib, so let's skip back out to root and see what's in package.js. Before we do, I think it's important to note that as far as the server is concerned we're just rendering index.html and the scripts that are associated with it. The entry point for the application is server.js and that's pointing us to the index.html file</p>

      <p>With that said, looking at <strong>package.json</strong> gives us some of the highlights that we're looking for.</p>

      <code>
        "name": "looking-for-front-end",
        "version": "1.0.0",
        "description": "Front end for Lookingfor app",
        "main": "index.js",
        "scripts": {
          "dev": "webpack-dev-server --content-base public/ --progress --colors --history-api-fallback",
          "start": "nodemon server.js",
          "test": "mocha test/setup.js test/**/*-test.js",
          "build": "webpack",
          "postinstall": "webpack -p --config webpack.production.config.js"
        },
      </code>

      <p>Prime lines to me in this file include the 'main' and 'script' attributes. I now know how to run my dev server, regular server, test suite, and build my js packages. I also know the next file that I'm going to want to take a look at: index.js</p>
      <p>And here in <strong>index.js</strong> is where things start to get good. We have another piece that looks like a routes file. This might seem like it belongs more in a server.js file, but remember what we saw there: <strong>everything is being run from index.js</strong>.</p>
      <code>
      let routes = (
        &#60Router history={browserHistory}&#60
          &#60Route path="/" component={JobIndex}/&#60
          &#60Route path="/jobs/:jobId" component={JobShow}/&#60
          &#60Route path="*" component={helpers.notFound}/&#60
        &#60/Router&#60
      )
      </code>
      <p>So with some understanding of React, and given the specifics of the code in this file we can intuit that these routes are being used to determine which component to render based on the route visited. This is only half true at this point, but it gets us where we need to be.</p>

      <h2>Files Referenced in Our Key Files</h2>
      <p>Based on our detective work above, it seems that index.js really is the key file. While server.js is the entry point for the server that will be running our app, index.js is the entry point for us as people who will be writing code to be compiled when we run 'npm run build' (from the package.json scripts, remember?).</p>
      <p>Given that, we can start to investigage JobIndex.js and JobShow.js. Doing so, we see that both files have a render method calling other components. Armed with this information my team and I were able to create the following diagram to get an idea of how the components in the app were related. Notice that JobIndex and JobShow (the files referenced in the routes) both sit at the top level in this diagram. Everything flows from them.</p>

      <code>
      JobIndex
        Header
        SearchBarAndListings
          JobListings
            Job (fullListing === false)
              Technology
                TechnologyItem
      JobShow
        Header
        Job (fullListing === true)
          Technology
            TechnologyItem
      </code>

      <p>This diagram really represents the moment I started to feel like I had some sort of handle on what was going on with the app. Most of my questions from this point out were more likely to reference specific code snippets than big picture 'what is going on' type issues.</p>

      <h2>Really Long Files</h2>
      <p>That said, I think the final step to take in an initial code review is to hunt around for large files. This might be especially true of React where large files might point to components that are carrying too much weight. In our case, we saw that Job.js and SearchBarAndListings.js were both pretty big. These files for us represented some easy wins that we could rack up by splitting these big components into smaller, more focused and manageable components.</p>
    </main>
  </body>
</html>
